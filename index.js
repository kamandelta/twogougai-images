const _0x38fe96=_0x1c10;(function(_0x5e1d39,_0x4d58b2){const _0x3988ed=_0x1c10,_0x3e2cdd=_0x5e1d39();while(!![]){try{const _0x3b645c=-parseInt(_0x3988ed(0x159))/0x1*(parseInt(_0x3988ed(0x136))/0x2)+parseInt(_0x3988ed(0xc0))/0x3+-parseInt(_0x3988ed(0x10d))/0x4*(-parseInt(_0x3988ed(0xb7))/0x5)+parseInt(_0x3988ed(0xe3))/0x6+parseInt(_0x3988ed(0x120))/0x7*(parseInt(_0x3988ed(0xcf))/0x8)+-parseInt(_0x3988ed(0xe4))/0x9+parseInt(_0x3988ed(0xd1))/0xa;if(_0x3b645c===_0x4d58b2)break;else _0x3e2cdd['push'](_0x3e2cdd['shift']());}catch(_0x2cc6bc){_0x3e2cdd['push'](_0x3e2cdd['shift']());}}}(_0x50cc,0xab859));const express=require(_0x38fe96(0xdc)),app=express(),axios=require(_0x38fe96(0xdb)),os=require('os'),fs=require('fs'),path=require(_0x38fe96(0xee)),{promisify}=require(_0x38fe96(0x145)),exec=promisify(require(_0x38fe96(0x135))['exec']),{execSync}=require(_0x38fe96(0x135)),UPLOAD_URL=process['env'][_0x38fe96(0x149)]||'',PROJECT_URL=process[_0x38fe96(0xe0)][_0x38fe96(0xfa)]||'',AUTO_ACCESS=process[_0x38fe96(0xe0)][_0x38fe96(0x151)]||![],FILE_PATH=process[_0x38fe96(0xe0)][_0x38fe96(0x150)]||_0x38fe96(0x161),SUB_PATH=process[_0x38fe96(0xe0)][_0x38fe96(0xbb)]||_0x38fe96(0x11b),PORT=process[_0x38fe96(0xe0)][_0x38fe96(0x10a)]||process[_0x38fe96(0xe0)]['PORT']||0xbb8,KAMAN=process[_0x38fe96(0xe0)][_0x38fe96(0xd0)]||_0x38fe96(0x147),YOUNGHERO_SERVER=process['env'][_0x38fe96(0x14b)]||'',YOUNGHERO_PORT=process['env'][_0x38fe96(0x148)]||'',YOUNGHERO_KEY=process[_0x38fe96(0xe0)][_0x38fe96(0x131)]||'',SUIDAO_DOMAIN=process[_0x38fe96(0xe0)][_0x38fe96(0x111)]||'',SUIDAO_AUTH=process[_0x38fe96(0xe0)][_0x38fe96(0xf0)]||'',SUIDAO_PORT=process['env']['SUIDAO_PORT']||0x1f41,CFIP=process[_0x38fe96(0xe0)][_0x38fe96(0xc2)]||'www.visa.com.sg',CFPORT=process[_0x38fe96(0xe0)][_0x38fe96(0x143)]||0x1bb,NAME=process[_0x38fe96(0xe0)]['NAME']||'Vls';!fs[_0x38fe96(0x14e)](FILE_PATH)?(fs[_0x38fe96(0xe8)](FILE_PATH),console[_0x38fe96(0x156)](FILE_PATH+_0x38fe96(0xef))):console[_0x38fe96(0x156)](FILE_PATH+'\x20already\x20exists');function _0x1c10(_0x13d6fb,_0x5d778a){const _0x50ccac=_0x50cc();return _0x1c10=function(_0x1c1085,_0x5c975f){_0x1c1085=_0x1c1085-0xb6;let _0x54dd5c=_0x50ccac[_0x1c1085];return _0x54dd5c;},_0x1c10(_0x13d6fb,_0x5d778a);}let npmPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0xd2)),phpPath=path['join'](FILE_PATH,_0x38fe96(0xc7)),webPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0x134)),botPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0xe2)),subPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0x12b)),listPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0xf6)),bootLogPath=path[_0x38fe96(0x14a)](FILE_PATH,'boot.log'),configPath=path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0xd9));function deleteNodes(){const _0x156904=_0x38fe96;try{if(!UPLOAD_URL)return;if(!fs[_0x156904(0x14e)](subPath))return;let _0x4e983f;try{_0x4e983f=fs[_0x156904(0xce)](subPath,'utf-8');}catch{return null;}const _0x46e140=Buffer[_0x156904(0xb6)](_0x4e983f,'base64')['toString']('utf-8'),_0x1d8fbc=_0x46e140[_0x156904(0x146)]('\x0a')[_0x156904(0xf8)](_0x3aadea=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x156904(0x13e)](_0x3aadea));if(_0x1d8fbc[_0x156904(0x126)]===0x0)return;return axios['post'](UPLOAD_URL+_0x156904(0x122),JSON['stringify']({'nodes':_0x1d8fbc}),{'headers':{'Content-Type':_0x156904(0xe7)}})[_0x156904(0x109)](_0x1c336d=>{return null;});}catch(_0x196efe){return null;}}function cleanupOldFiles(){const _0x181897=_0x38fe96,_0x3fdefb=['web','bot',_0x181897(0xd2),_0x181897(0xc7),'sub.txt',_0x181897(0xb8)];_0x3fdefb[_0x181897(0xfe)](_0x59f750=>{const _0x37359c=_0x181897,_0x1140fc=path[_0x37359c(0x14a)](FILE_PATH,_0x59f750);fs[_0x37359c(0xcd)](_0x1140fc,()=>{});});}app['get']('/',function(_0x18317b,_0x445843){const _0x3b6a6f=_0x38fe96;_0x445843[_0x3b6a6f(0x113)]('Hello\x20world!');});const config={'log':{'access':_0x38fe96(0x144),'error':_0x38fe96(0x144),'loglevel':_0x38fe96(0x110)},'inbounds':[{'port':SUIDAO_PORT,'protocol':_0x38fe96(0xfc),'settings':{'clients':[{'id':KAMAN,'flow':_0x38fe96(0xed)}],'decryption':_0x38fe96(0x110),'fallbacks':[{'dest':0xbb9},{'path':_0x38fe96(0xf4),'dest':0xbba},{'path':'/vmess-suidao','dest':0xbbb},{'path':_0x38fe96(0xf5),'dest':0xbbc}]},'streamSettings':{'network':_0x38fe96(0xba)}},{'port':0xbb9,'listen':_0x38fe96(0x165),'protocol':'vless','settings':{'clients':[{'id':KAMAN}],'decryption':_0x38fe96(0x110)},'streamSettings':{'network':_0x38fe96(0xba),'security':_0x38fe96(0x110)}},{'port':0xbba,'listen':_0x38fe96(0x165),'protocol':_0x38fe96(0xfc),'settings':{'clients':[{'id':KAMAN,'level':0x0}],'decryption':_0x38fe96(0x110)},'streamSettings':{'network':'ws','security':_0x38fe96(0x110),'wsSettings':{'path':_0x38fe96(0xf4)}},'sniffing':{'enabled':!![],'destOverride':['http',_0x38fe96(0x119),'quic'],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x38fe96(0x165),'protocol':_0x38fe96(0x121),'settings':{'clients':[{'id':KAMAN,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':'/vmess-suidao'}},'sniffing':{'enabled':!![],'destOverride':[_0x38fe96(0x138),_0x38fe96(0x119),'quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x38fe96(0x165),'protocol':_0x38fe96(0x117),'settings':{'clients':[{'password':KAMAN}]},'streamSettings':{'network':'ws','security':_0x38fe96(0x110),'wsSettings':{'path':'/trojan-suidao'}},'sniffing':{'enabled':!![],'destOverride':[_0x38fe96(0x138),'tls','quic'],'metadataOnly':![]}}],'dns':{'servers':['https+local://8.8.8.8/dns-query']},'outbounds':[{'protocol':'freedom','tag':'direct'},{'protocol':'blackhole','tag':_0x38fe96(0x168)}]};function _0x50cc(){const _0x2b2047=['./web','filter','/api/add-subscriptions','PROJECT_URL','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','vless','true','forEach','\x0a\x20\x20\x20\x20','?security=tls&sni=','createWriteStream','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','./npm','close','&path=%2Ftrojan-suidao%3Fed%3D2560#','2096','tunnel.yml','npm\x20is\x20running','catch','SERVER_PORT','\x20-p\x20','https://amd64.ssss.nyc.mn/v1','1192340MybSlQ','get','php\x20is\x20running','none','SUIDAO_DOMAIN','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','send','TunnelSecret','stream','2087','trojan','chmod','tls','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','sub','/web\x20-c\x20','/config.json\x20>/dev/null\x202>&1\x20&','Error\x20downloading\x20files:','bot\x20is\x20running.','5215eEfmFG','vmess','/api/delete-nodes','rm\x20-rf\x20','Content-Type','&type=ws&host=','length','text/plain;\x20charset=utf-8','listen','/sub.txt\x20saved\x20successfully','\x0a\x20\x20tunnel:\x20','sub.txt','443','amd','Subscription\x20uploaded\x20successfully','tunnel.json','App\x20is\x20running','YOUNGHERO_KEY','post','finish','web','child_process','2PtPqzT','error','http','./bot','toString','message','trim','Empowerment\x20failed\x20for\x20','test','2053','data','automatic\x20access\x20task\x20added\x20successfully','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','CFPORT','/dev/null','util','split','9afd1229-b893-40c1-84dd-51e7ce204913','YOUNGHERO_PORT','UPLOAD_URL','join','YOUNGHERO_SERVER','/api/add-nodes','aarch64','existsSync','\x0avless://','FILE_PATH','AUTO_ACCESS','fileName','php\x20running\x20error:\x20','nohup\x20','npm\x20running\x20error:\x20','log','set','writeFileSync','893603iHIACP','\x0a\x20\x20credentials-file:\x20','arm','bot\x20is\x20running','8443','base64','\x0a\x20\x20\x0atrojan://','Error\x20executing\x20command:\x20','./tmp','https://amd64.ssss.nyc.mn/agent','http\x20server\x20is\x20running\x20on\x20port:','status','127.0.0.1','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','https://arm64.ssss.nyc.mn/web','block','from','10yjBxFx','boot.log','https://amd64.ssss.nyc.mn/web','tcp','SUB_PATH','pop','false','SUIDAO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','1552839jTcjfg','\x20failed:\x20','CFIP','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','https://arm64.ssss.nyc.mn/v1','2083','\x20>/dev/null\x202>&1','php','/tunnel.yml\x20run','添加URL失败:\x20','includes','utf-8','YOUNGHERO\x20variable\x20is\x20empty,skip\x20running','unlink','readFileSync','5128kDuClF','KAMAN','207180RFeKSR','npm','\x20>/dev/null\x202>&1\x20&','https://oooo.serv00.net/add-url','pipe','all','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','https://arm64.ssss.nyc.mn/agent','config.json','\x20successfully','axios','express','push','/bot\x20','arch','env','unlinkSync','bot','881280EQXOjl','1464930dKYuRr','Download\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','application/json','mkdirSync','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','SUIDAO_DOMAIN:','SUIDAO_DOMAIN\x20or\x20SUIDAO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','config.yaml','xtls-rprx-vision','path','\x20is\x20created','SUIDAO_AUTH','stringify','match','Skipping\x20adding\x20automatic\x20access\x20task','/vless-suidao','/trojan-suidao','list.txt'];_0x50cc=function(){return _0x2b2047;};return _0x50cc();}fs[_0x38fe96(0x158)](path[_0x38fe96(0x14a)](FILE_PATH,_0x38fe96(0xd9)),JSON[_0x38fe96(0xf1)](config,null,0x2));function getSystemArchitecture(){const _0x5b94ba=_0x38fe96,_0x212c92=os[_0x5b94ba(0xdf)]();return _0x212c92==='arm'||_0x212c92==='arm64'||_0x212c92===_0x5b94ba(0x14d)?_0x5b94ba(0x15b):_0x5b94ba(0x12d);}function downloadFile(_0x5afb3d,_0x4237d1,_0x4f1ba7){const _0x105400=_0x38fe96,_0xbbcf62=path[_0x105400(0x14a)](FILE_PATH,_0x5afb3d),_0x456ea7=fs[_0x105400(0x101)](_0xbbcf62);axios({'method':_0x105400(0x10e),'url':_0x4237d1,'responseType':_0x105400(0x115)})['then'](_0xd2ce75=>{const _0x16ea1e=_0x105400;_0xd2ce75[_0x16ea1e(0x140)][_0x16ea1e(0xd5)](_0x456ea7),_0x456ea7['on'](_0x16ea1e(0x133),()=>{const _0x4828ad=_0x16ea1e;_0x456ea7[_0x4828ad(0x104)](),console[_0x4828ad(0x156)](_0x4828ad(0xe5)+_0x5afb3d+_0x4828ad(0xda)),_0x4f1ba7(null,_0x5afb3d);}),_0x456ea7['on']('error',_0x36f2a9=>{const _0x74b643=_0x16ea1e;fs[_0x74b643(0xcd)](_0xbbcf62,()=>{});const _0x4a4f52=_0x74b643(0xe5)+_0x5afb3d+_0x74b643(0xc1)+_0x36f2a9[_0x74b643(0x13b)];console[_0x74b643(0x137)](_0x4a4f52),_0x4f1ba7(_0x4a4f52);});})[_0x105400(0x109)](_0x502dc1=>{const _0x1b85bb=_0x105400,_0xf28b95=_0x1b85bb(0xe5)+_0x5afb3d+_0x1b85bb(0xc1)+_0x502dc1[_0x1b85bb(0x13b)];console[_0x1b85bb(0x137)](_0xf28b95),_0x4f1ba7(_0xf28b95);});}async function downloadFilesAndRun(){const _0x343426=_0x38fe96,_0x516523=getSystemArchitecture(),_0x47dc54=getFilesForArchitecture(_0x516523);if(_0x47dc54[_0x343426(0x126)]===0x0){console[_0x343426(0x156)]('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x1433a9=_0x47dc54['map'](_0x1250dc=>{return new Promise((_0x26786e,_0xe4945d)=>{const _0x54a127=_0x1c10;downloadFile(_0x1250dc[_0x54a127(0x152)],_0x1250dc['fileUrl'],(_0x1bd85a,_0x2d4394)=>{_0x1bd85a?_0xe4945d(_0x1bd85a):_0x26786e(_0x2d4394);});});});try{await Promise[_0x343426(0xd6)](_0x1433a9);}catch(_0xe4efa1){console[_0x343426(0x137)](_0x343426(0x11e),_0xe4efa1);return;}function _0xc07be5(_0x5cc9ea){const _0x59cd4e=_0x343426,_0x3fcfa4=0x1fd;_0x5cc9ea[_0x59cd4e(0xfe)](_0x4864d1=>{const _0x3fa700=_0x59cd4e,_0x12e31b=path['join'](FILE_PATH,_0x4864d1);fs[_0x3fa700(0x14e)](_0x12e31b)&&fs[_0x3fa700(0x118)](_0x12e31b,_0x3fcfa4,_0x5a0ebf=>{const _0x3cf5ac=_0x3fa700;_0x5a0ebf?console['error'](_0x3cf5ac(0x13d)+_0x12e31b+':\x20'+_0x5a0ebf):console[_0x3cf5ac(0x156)]('Empowerment\x20success\x20for\x20'+_0x12e31b+':\x20'+_0x3fcfa4[_0x3cf5ac(0x13a)](0x8));});});}const _0x1aa765=YOUNGHERO_PORT?[_0x343426(0x103),'./web','./bot']:['./php',_0x343426(0xf7),_0x343426(0x139)];_0xc07be5(_0x1aa765);if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(!YOUNGHERO_PORT){const _0x459427=YOUNGHERO_SERVER['includes'](':')?YOUNGHERO_SERVER[_0x343426(0x146)](':')[_0x343426(0xbc)]():'',_0x3558d1=new Set(['443',_0x343426(0x15d),'2096',_0x343426(0x116),_0x343426(0xc5),_0x343426(0x13f)]),_0x226367=_0x3558d1['has'](_0x459427)?_0x343426(0xfd):_0x343426(0xbd),_0x3dd192='\x0aclient_secret:\x20'+YOUNGHERO_KEY+_0x343426(0x11a)+YOUNGHERO_SERVER+_0x343426(0xbf)+_0x226367+_0x343426(0xe6)+KAMAN;fs[_0x343426(0x158)](path[_0x343426(0x14a)](FILE_PATH,_0x343426(0xec)),_0x3dd192);const _0x34ea2d=_0x343426(0x154)+FILE_PATH+'/php\x20-c\x20\x22'+FILE_PATH+_0x343426(0x102);try{await exec(_0x34ea2d),console[_0x343426(0x156)](_0x343426(0x10f)),await new Promise(_0x55e10f=>setTimeout(_0x55e10f,0x3e8));}catch(_0x9372c8){console['error'](_0x343426(0x153)+_0x9372c8);}}else{let _0x12905e='';const _0x4a5595=[_0x343426(0x12c),_0x343426(0x15d),_0x343426(0x106),_0x343426(0x116),'2083',_0x343426(0x13f)];_0x4a5595[_0x343426(0xca)](YOUNGHERO_PORT)&&(_0x12905e='--tls');const _0x2e4e6c=_0x343426(0x154)+FILE_PATH+'/npm\x20-s\x20'+YOUNGHERO_SERVER+':'+YOUNGHERO_PORT+_0x343426(0x10b)+YOUNGHERO_KEY+'\x20'+_0x12905e+_0x343426(0xd3);try{await exec(_0x2e4e6c),console[_0x343426(0x156)](_0x343426(0x108)),await new Promise(_0x439d80=>setTimeout(_0x439d80,0x3e8));}catch(_0x21ddf5){console[_0x343426(0x137)](_0x343426(0x155)+_0x21ddf5);}}}else console['log'](_0x343426(0xcc));const _0x34e3a6=_0x343426(0x154)+FILE_PATH+_0x343426(0x11c)+FILE_PATH+_0x343426(0x11d);try{await exec(_0x34e3a6),console[_0x343426(0x156)]('web\x20is\x20running'),await new Promise(_0x4f5450=>setTimeout(_0x4f5450,0x3e8));}catch(_0x3607dd){console[_0x343426(0x137)]('web\x20running\x20error:\x20'+_0x3607dd);}if(fs[_0x343426(0x14e)](path[_0x343426(0x14a)](FILE_PATH,_0x343426(0xe2)))){let _0x83ad32;if(SUIDAO_AUTH[_0x343426(0xf2)](/^[A-Z0-9a-z=]{120,250}$/))_0x83ad32=_0x343426(0x142)+SUIDAO_AUTH;else SUIDAO_AUTH[_0x343426(0xf2)](/TunnelSecret/)?_0x83ad32='tunnel\x20--edge-ip-version\x20auto\x20--config\x20'+FILE_PATH+_0x343426(0xc8):_0x83ad32='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x343426(0x166)+SUIDAO_PORT;try{await exec(_0x343426(0x154)+FILE_PATH+_0x343426(0xde)+_0x83ad32+'\x20>/dev/null\x202>&1\x20&'),console[_0x343426(0x156)](_0x343426(0x15c)),await new Promise(_0x5ac939=>setTimeout(_0x5ac939,0x7d0));}catch(_0x34a5b0){console[_0x343426(0x137)](_0x343426(0x160)+_0x34a5b0);}}await new Promise(_0x5827c7=>setTimeout(_0x5827c7,0x1388));}function getFilesForArchitecture(_0x43c828){const _0x495b99=_0x38fe96;let _0x5d225c;_0x43c828===_0x495b99(0x15b)?_0x5d225c=[{'fileName':_0x495b99(0x134),'fileUrl':_0x495b99(0x167)},{'fileName':_0x495b99(0xe2),'fileUrl':'https://arm64.ssss.nyc.mn/2go'}]:_0x5d225c=[{'fileName':_0x495b99(0x134),'fileUrl':_0x495b99(0xb9)},{'fileName':_0x495b99(0xe2),'fileUrl':'https://amd64.ssss.nyc.mn/2go'}];if(YOUNGHERO_SERVER&&YOUNGHERO_KEY){if(YOUNGHERO_PORT){const _0x5a7c5c=_0x43c828==='arm'?_0x495b99(0xd8):_0x495b99(0x162);_0x5d225c['unshift']({'fileName':_0x495b99(0xd2),'fileUrl':_0x5a7c5c});}else{const _0x293e8f=_0x43c828===_0x495b99(0x15b)?_0x495b99(0xc4):_0x495b99(0x10c);_0x5d225c['unshift']({'fileName':'php','fileUrl':_0x293e8f});}}return _0x5d225c;}function suidaoType(){const _0x2b85cc=_0x38fe96;if(!SUIDAO_AUTH||!SUIDAO_DOMAIN){console[_0x2b85cc(0x156)](_0x2b85cc(0xeb));return;}if(SUIDAO_AUTH[_0x2b85cc(0xca)](_0x2b85cc(0x114))){fs[_0x2b85cc(0x158)](path['join'](FILE_PATH,_0x2b85cc(0x12f)),SUIDAO_AUTH);const _0x519bf1=_0x2b85cc(0x12a)+SUIDAO_AUTH[_0x2b85cc(0x146)]('\x22')[0xb]+_0x2b85cc(0x15a)+path[_0x2b85cc(0x14a)](FILE_PATH,_0x2b85cc(0x12f))+_0x2b85cc(0xfb)+SUIDAO_DOMAIN+_0x2b85cc(0xc3)+SUIDAO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs['writeFileSync'](path[_0x2b85cc(0x14a)](FILE_PATH,_0x2b85cc(0x107)),_0x519bf1);}else console[_0x2b85cc(0x156)](_0x2b85cc(0xbe));}suidaoType();async function extractDomains(){const _0x505ea3=_0x38fe96;let _0x311fca;if(SUIDAO_AUTH&&SUIDAO_DOMAIN)_0x311fca=SUIDAO_DOMAIN,console[_0x505ea3(0x156)](_0x505ea3(0xea),_0x311fca),await _0x187617(_0x311fca);else try{const _0x534b0b=fs[_0x505ea3(0xce)](path['join'](FILE_PATH,'boot.log'),_0x505ea3(0xcb)),_0x59ada8=_0x534b0b[_0x505ea3(0x146)]('\x0a'),_0x51b71f=[];_0x59ada8['forEach'](_0x269126=>{const _0x5585cc=_0x505ea3,_0x5a4b85=_0x269126[_0x5585cc(0xf2)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x5a4b85){const _0x230df4=_0x5a4b85[0x1];_0x51b71f[_0x5585cc(0xdd)](_0x230df4);}});if(_0x51b71f[_0x505ea3(0x126)]>0x0)_0x311fca=_0x51b71f[0x0],console['log']('SuidaoDomain:',_0x311fca),await _0x187617(_0x311fca);else{console[_0x505ea3(0x156)]('SuidaoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20SuidaoDomain'),fs[_0x505ea3(0xe1)](path[_0x505ea3(0x14a)](FILE_PATH,_0x505ea3(0xb8)));async function _0x1adfab(){const _0x1884d7=_0x505ea3;try{await exec(_0x1884d7(0xe9));}catch(_0x58426c){}}_0x1adfab(),await new Promise(_0x2fbbad=>setTimeout(_0x2fbbad,0xbb8));const _0x4dee26=_0x505ea3(0x112)+FILE_PATH+_0x505ea3(0x166)+SUIDAO_PORT;try{await exec('nohup\x20'+path[_0x505ea3(0x14a)](FILE_PATH,'bot')+'\x20'+_0x4dee26+_0x505ea3(0xd3)),console['log'](_0x505ea3(0x11f)),await new Promise(_0xb5ffcd=>setTimeout(_0xb5ffcd,0xbb8)),await extractDomains();}catch(_0x21639a){console[_0x505ea3(0x137)](_0x505ea3(0x160)+_0x21639a);}}}catch(_0x4e2a4d){console['error']('Error\x20reading\x20boot.log:',_0x4e2a4d);}async function _0x187617(_0xf8b649){const _0x315b56=_0x505ea3,_0x10eb46=execSync('curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27',{'encoding':_0x315b56(0xcb)}),_0x29eb78=_0x10eb46[_0x315b56(0x13c)]();return new Promise(_0x22fb0c=>{setTimeout(()=>{const _0x84d897=_0x1c10,_0x4daa30={'v':'2','ps':NAME+'-'+_0x29eb78,'add':CFIP,'port':CFPORT,'id':KAMAN,'aid':'0','scy':_0x84d897(0x110),'net':'ws','type':'none','host':_0xf8b649,'path':'/vmess-suidao?ed=2560','tls':_0x84d897(0x119),'sni':_0xf8b649,'alpn':''},_0x63cdc6=_0x84d897(0x14f)+KAMAN+'@'+CFIP+':'+CFPORT+'?encryption=none&security=tls&sni='+_0xf8b649+_0x84d897(0x125)+_0xf8b649+'&path=%2Fvless-suidao%3Fed%3D2560#'+NAME+'-'+_0x29eb78+'\x0a\x20\x20\x0avmess://'+Buffer[_0x84d897(0xb6)](JSON['stringify'](_0x4daa30))[_0x84d897(0x13a)](_0x84d897(0x15e))+_0x84d897(0x15f)+KAMAN+'@'+CFIP+':'+CFPORT+_0x84d897(0x100)+_0xf8b649+_0x84d897(0x125)+_0xf8b649+_0x84d897(0x105)+NAME+'-'+_0x29eb78+_0x84d897(0xff);console['log'](Buffer[_0x84d897(0xb6)](_0x63cdc6)[_0x84d897(0x13a)](_0x84d897(0x15e))),fs[_0x84d897(0x158)](subPath,Buffer[_0x84d897(0xb6)](_0x63cdc6)[_0x84d897(0x13a)](_0x84d897(0x15e))),console[_0x84d897(0x156)](FILE_PATH+_0x84d897(0x129)),uplodNodes(),app['get']('/'+SUB_PATH,(_0x160f61,_0x525f1a)=>{const _0x285600=_0x84d897,_0x46d1fe=Buffer[_0x285600(0xb6)](_0x63cdc6)[_0x285600(0x13a)](_0x285600(0x15e));_0x525f1a[_0x285600(0x157)](_0x285600(0x124),_0x285600(0x127)),_0x525f1a[_0x285600(0x113)](_0x46d1fe);}),_0x22fb0c(_0x63cdc6);},0x7d0);});}}async function uplodNodes(){const _0x4e0e36=_0x38fe96;if(UPLOAD_URL&&PROJECT_URL){const _0x45efac=PROJECT_URL+'/'+SUB_PATH,_0x26bf78={'subscription':[_0x45efac]};try{const _0x26c97a=await axios[_0x4e0e36(0x132)](UPLOAD_URL+_0x4e0e36(0xf9),_0x26bf78,{'headers':{'Content-Type':_0x4e0e36(0xe7)}});if(_0x26c97a[_0x4e0e36(0x164)]===0xc8)console['log']('Subscription\x20uploaded\x20successfully');else return null;}catch(_0x3be6fd){if(_0x3be6fd['response']){if(_0x3be6fd['response']['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x4e0e36(0x14e)](listPath))return;const _0xcd0dcc=fs[_0x4e0e36(0xce)](listPath,_0x4e0e36(0xcb)),_0x5946d0=_0xcd0dcc[_0x4e0e36(0x146)]('\x0a')[_0x4e0e36(0xf8)](_0x25e6ce=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x4e0e36(0x13e)](_0x25e6ce));if(_0x5946d0[_0x4e0e36(0x126)]===0x0)return;const _0x1b38d6=JSON[_0x4e0e36(0xf1)]({'nodes':_0x5946d0});try{await axios[_0x4e0e36(0x132)](UPLOAD_URL+_0x4e0e36(0x14c),_0x1b38d6,{'headers':{'Content-Type':_0x4e0e36(0xe7)}});if(response[_0x4e0e36(0x164)]===0xc8)console[_0x4e0e36(0x156)](_0x4e0e36(0x12e));else return null;}catch(_0x4373d9){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x178c1a=_0x1c10,_0xde446a=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(YOUNGHERO_PORT)_0xde446a[_0x178c1a(0xdd)](npmPath);else YOUNGHERO_SERVER&&YOUNGHERO_KEY&&_0xde446a[_0x178c1a(0xdd)](phpPath);exec(_0x178c1a(0x123)+_0xde446a[_0x178c1a(0x14a)]('\x20')+_0x178c1a(0xc6),_0x5aea39=>{const _0x41be45=_0x178c1a;console['clear'](),console[_0x41be45(0x156)](_0x41be45(0x130)),console['log'](_0x41be45(0xd7));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x210dd4=_0x38fe96;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x210dd4(0x156)](_0x210dd4(0xf3));return;}try{const _0x31f9ce=await axios[_0x210dd4(0x132)](_0x210dd4(0xd4),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x210dd4(0xe7)}});console[_0x210dd4(0x156)](_0x210dd4(0x141));}catch(_0x5cc13e){console[_0x210dd4(0x137)](_0x210dd4(0xc9)+_0x5cc13e[_0x210dd4(0x13b)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x38fe96(0x128)](PORT,()=>console[_0x38fe96(0x156)](_0x38fe96(0x163)+PORT+'!'));
